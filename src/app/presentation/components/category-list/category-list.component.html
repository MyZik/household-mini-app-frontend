@let categoriesData = categories();

@if (categoriesData === 'loading' || categoriesData === 'not-loaded') {
    <app-loading-duck
        message="Daten werden geladen..."
        duckType="dancing">
    </app-loading-duck>
} @else if (categoriesData === 'load-failed') {
    <app-error-message
        message="Die Kategorien konnten nicht geladen werden. Bitte versuche es später erneut."
    ></app-error-message>
} @else {
    @if (categoriesData && categoriesData.length === 0) {
        <div class="empty-container">
            <img src="assets/duck-lens-transparent.png" alt="Entchen" class="empty-duck-image">
            <p class="empty-message">Keine Kategorien gefunden.</p>
            <p class="empty-suggestion">Möchtest du deine erste Kategorie erstellen?</p>
            <button mat-raised-button color="primary" class="create-button">
                Neue Kategorie erstellen
            </button>
        </div>
    } @else {
        <div class="category-list-container">
            <h1 class="category-list-title">Meine Kategorien</h1>

            <div class="category-cards">
                @for (category of categoriesData; track category.id) {
                    <app-category-card
                        [category]="category"
                        [expanded]="isPanelExpanded(category.id)"
                        (toggleExpand)="togglePanel($event)"
                    ></app-category-card>
                }
            </div>
        </div>
    }
}
